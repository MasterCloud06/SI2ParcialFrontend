<div
  *ngIf="isLoggedIn"
  class="sidebar"
  [ngClass]="{ 'showSidebar': isSidebarVisible, 'hideSidebar': !isSidebarVisible }"
  [@fadeInOut]
>
  <ul>
    <!-- Elemento común para todos los roles -->
    <li>
      <a
        routerLinkActive="active"
        (click)="toggleSubmenu()"
        aria-label="Toggle Dashboard Submenu"
        matTooltip="Dashboard"
      >
        <span class="menu-icon material-icons">dashboard</span>
        <span class="menu-text">Dashboard</span>
        <span class="sub-menu-icon" [ngClass]="{ 'sub-menu-open': isSubmenuOpen }">
          <mat-icon>{{ isSubmenuOpen ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}</mat-icon>
        </span>
      </a>
      <!-- Sub-menú para Dashboard con padding izquierdo -->
      <ul *ngIf="isSubmenuOpen" class="sub-menu">
        <li>
          <a
            routerLink="/dashboard"
            routerLinkActive="active"
            aria-label="Details"
            matTooltip="Detalles"
          >
            <span class="menu-icon material-icons">details</span>
            <span class="menu-text">Details</span>
          </a>
        </li>
        <li>
          <a
            routerLink="/dashboard/messages"
            routerLinkActive="active"
            aria-label="Messages"
            matTooltip="Mensajes"
          >
            <span class="menu-icon material-icons">message</span>
            <span class="menu-text">Messages</span>
          </a>
        </li>
      </ul>
    </li>

    <!-- Agrupar elementos según roles del usuario -->
    <ng-container *ngIf="userRoles.length > 0">
      <!-- Elementos específicos para Administradores -->
      <li *ngIf="hasRole('ADMIN')">
        <a
          routerLink="/admin"
          routerLinkActive="active"
          aria-label="Admin Panel"
          matTooltip="Panel de Administrador"
        >
          <span class="menu-icon material-icons">admin_panel_settings</span>
          <span class="menu-text">Admin Panel</span>
        </a>
      </li>

      <li *ngIf="hasRole('ADMIN')">
        <a
          routerLink="/admin/bitacora"
          routerLinkActive="active"
          aria-label="Bitácora"
          matTooltip="Bitácora de Actividades"
        >
          <span class="menu-icon material-icons">history</span>
          <span class="menu-text">Bitácora</span>
        </a>
      </li>

      <!-- Elementos específicos para Usuarios -->
      <li *ngIf="hasRole('USER')">
        <a
          routerLink="/teacher"
          routerLinkActive="active"
          aria-label="User Dashboard"
          matTooltip="Dashboard de Usuario"
        >
          <span class="menu-icon material-icons">person</span>
          <span class="menu-text">User Dashboard</span>
        </a>
      </li>

      <!-- Elementos específicos para Pacientes -->
      <li *ngIf="hasRole('PACIENTE')">
        <a
          routerLink="/paciente"
          routerLinkActive="active"
          aria-label="Paciente Panel"
          matTooltip="Panel de Paciente"
        >
          <span class="menu-icon material-icons">health_and_safety</span>
          <span class="menu-text">Paciente Panel</span>
        </a>
      </li>
      <li *ngIf="hasRole('PACIENTE')">
        <a
          routerLink="/paciente/consultas"
          routerLinkActive="active"
          aria-label="Fichas Consulta Externa"
          matTooltip="Fichas Consulta Externa"
        >
          <span class="menu-icon material-icons">assignment</span>
          <span class="menu-text">Fichas Consulta Externa</span>
        </a>
      </li>
      <li *ngIf="hasRole('PACIENTE')">
        <a
          routerLink="/paciente/resultados"
          routerLinkActive="active"
          aria-label="Resultados de Laboratorio"
          matTooltip="Resultados de Laboratorio"
        >
          <span class="menu-icon material-icons">science</span>
          <span class="menu-text">Resultados de Laboratorio</span>
        </a>
      </li>

      <!-- Elementos específicos para Médicos -->
      <li *ngIf="hasRole('MEDICO')">
        <a
          routerLink="/medico"
          routerLinkActive="active"
          aria-label="Medico Panel"
          matTooltip="Panel de Médico"
        >
          <span class="menu-icon material-icons">medical_services</span>
          <span class="menu-text">Medico Panel</span>
        </a>
      </li>
    </ng-container>

    <!-- Elementos comunes para todos los usuarios -->
    <li>
      <a
        routerLink="/home"
        routerLinkActive="active"
        aria-label="Home"
        matTooltip="Inicio"
      >
        <span class="menu-icon material-icons">home</span>
        <span class="menu-text">Home</span>
      </a>
    </li>
    <li>
      <a
        routerLink="/grades"
        routerLinkActive="active"
        aria-label="Grades"
        matTooltip="Calificaciones"
      >
        <span class="menu-icon material-icons">grade</span>
        <span class="menu-text">Grades</span>
      </a>
    </li>
    <li>
      <a
        routerLink="/schedule"
        routerLinkActive="active"
        aria-label="Schedule"
        matTooltip="Horario"
      >
        <span class="menu-icon material-icons">schedule</span>
        <span class="menu-text">Schedule</span>
      </a>
    </li>
    <li>
      <a
        routerLink="/timetable"
        routerLinkActive="active"
        aria-label="Time Table"
        matTooltip="Tabla de Tiempos"
      >
        <span class="menu-icon material-icons">access_time</span>
        <span class="menu-text">Time Table</span>
      </a>
    </li>
    <li>
      <a
        routerLink="/settings"
        routerLinkActive="active"
        aria-label="Settings"
        matTooltip="Configuraciones"
      >
        <span class="menu-icon material-icons">settings</span>
        <span class="menu-text">Settings</span>
      </a>
    </li>
  </ul>
</div>
